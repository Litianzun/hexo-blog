---
title: å‰ç«¯éƒ¨ç½²ä¸ªäººå°è®°
date: 2020-10-12 09:06:34
categories: [æŠ€æœ¯]
img: https://cdn.ldpro.top/cover/other2.jpeg
tags:
- å‰ç«¯éƒ¨ç½²
- éƒ¨ç½²
---

*å£°æ˜ï¼šå‰ç«¯éƒ¨ç½²ç½‘ä¸Šæœç´¢æœ‰ä¸å°‘çš„æ–‡ç« ï¼Œä½†æ˜¯è¿™é‡Œåˆ—ä¸¾çš„æ˜¯æˆ‘è‡ªå·±ç›®å‰ç”¨çš„ä¸€äº›æ‰‹æ®µï¼Œç»å¯¹æ˜¯äº²èº«å®è·µè¿‡çš„(æœåŠ¡å™¨åˆ°æœŸï¼Œåœ°å€ç›®å‰ä¸å¯ç”¨)*
***ç°åœ¨åšå®¢å’ŒæŸäº›é¡¹ç›®è¢«æˆ‘éƒ¨ç½²åˆ°github pagesï¼Œç”¨travisè¿›è¡ŒCI/CDï¼Œå¯¹ä¸ªäººå¼€å‘è€…æ¥è¯´æ›´åŠ å‹å¥½***

### å‰è¨€
è¿™é‡Œçš„éƒ¨ç½²ä¸»è¦åˆ†ä¸¤å—ï¼šå‰ç«¯å’Œåç«¯ï¼›å‰ç«¯æŒ‡çš„æ˜¯æˆ‘ä»¬æ‰“å‡ºæ¥çš„diståŒ…ï¼Œåç«¯æŒ‡çš„æ˜¯ä¸€äº›åç«¯æœåŠ¡ï¼Œæ—¢ç„¶è¿™é‡Œè¯´çš„æ˜¯å‰ç«¯éƒ¨ç½²ï¼Œé‚£å¿…é¡»å¾—æ˜¯nodeæœåŠ¡äº†ï¼Œè¿™ä¸ªæœåŠ¡éƒ¨ç½²å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥è®¿é—®å®ƒçš„apiäº†ï¼›è¿™æ ·ï¼Œä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®å°±æˆåŠŸéƒ¨ç½²å¥½äº†ï¼Œè¿™é‡Œæˆ‘ä¾æ®çš„æ˜¯æˆ‘è‡ªå·±éƒ¨ç½²å¥½çš„é¡¹ç›®ï¼š[ç½‘æ˜“äº‘éŸ³ä¹](http://175.24.123.231:8081/)ï¼Œä¸‹é¢æˆ‘è¯¦ç»†è¯´æ˜

### éƒ¨ç½²å‰çš„å‡†å¤‡
é‚£è‚¯å®šæ˜¯éœ€è¦ä¸€å°æœåŠ¡å™¨ï¼ŒåŸŸåçš„è¯ï¼Œæœ‰éœ€æ±‚å°±ä¹°ä¸€ä¸ªå§ï¼Œæš‚æ—¶ä¸éœ€è¦çš„è¯åƒæˆ‘ä¸€æ ·ç”¨ipåœ°å€è®¿é—®å…¶å®é—®é¢˜ä¹Ÿä¸å¤§ï¼Œå°±æ˜¯ä¸‘ä¸€ç‚¹ğŸ˜‚
æˆ‘è¿™é‡Œç”¨åˆ°çš„æœåŠ¡å™¨æ˜¯è…¾è®¯äº‘è´­ä¹°çš„centOSäº‘æœåŠ¡å™¨ï¼Œç„¶åç”¨çš„æ˜¯å­¦ç”Ÿä½“éªŒå¥—é¤ï¼Œ10å…ƒ/æœˆï¼Œæˆ‘ç»­äº†ä¸€å¹´ï¼Œç›®å‰ä¹Ÿå¤Ÿç”¨äº†ï¼›
<img src="https://cdn.ldpro.top/p1.png" width= 360 />
é€‰æ‹©æœåŠ¡å™¨æ—¶éœ€è¦æ³¨æ„ï¼šä¸€ä¸ªæ˜¯æ“ä½œç³»ç»Ÿï¼Œä¸€ä¸ªæ˜¯é€‰æ‹©åœ°åŒºï¼›æ“ä½œç³»ç»Ÿå»ºè®®linuxï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œé€‰æ‹©unbuntuæˆ–è€…centOSï¼Œæˆ‘ç”¨çš„æ˜¯centOSï¼Œåœ°åŒºçš„è¯é€‰æ‹©ç¦»è‡ªå·±æœ€è¿‘çš„åœ°åŒºï¼Œé€Ÿåº¦ç›¸åº”çš„ä¹Ÿä¼šå¿«äº›
<img src="https://cdn.ldpro.top/p2.png" width= 360 />
ä¹°å¥½ä¹‹åï¼Œè…¾è®¯äº‘ä¼šå‘é€ä¸€å°ç«™å†…ä¿¡ï¼Œé‡Œé¢æœ‰äº‘æœåŠ¡å™¨çš„ç™»å½•å¯†ç ï¼Œä¹‹åè¿›å…¥äº‘æœåŠ¡å™¨-å®ä¾‹ï¼Œæ‰¾åˆ°è‡ªå·±åˆšåˆšè´­ä¹°çš„æœåŠ¡å™¨ï¼Œç‚¹å‡»ç™»å½•
ç™»å½•çš„è¯åˆ†å¥½å‡ ç§æ–¹å¼ï¼Œè¿™é‡Œæˆ‘åˆ—ä¸¾æˆ‘æœ¬äººè§‰å¾—æœ€å¥½ç”¨çš„ä¸€ç§ï¼šsshç™»å½•
<img src="https://cdn.ldpro.top/p3.png" width= 360 />
æŒ‰å›¾ç¤ºç™»å½•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç»ˆç«¯æ¥æ§åˆ¶äº‘æœåŠ¡å™¨äº†ï¼Œé¦–å…ˆæˆ‘ä»¬æ­å»ºå¿…è¦çš„ç¯å¢ƒï¼š
ï¼ˆè¿™é‡Œè¦æ’ä¸€å¥ï¼Œå¦‚æœä½ ä¸æƒ³ä¹‹åä¸€ç›´ç”¨å‘½ä»¤è¡Œçš„è¯ï¼Œè¿˜æ˜¯è£…ä¸ªå®å¡”é¢æ¿å§ï¼Œä¸ç„¶ä¹‹åä¸Šä¼ æ–‡ä»¶å•¥çš„ä¼šå¾ˆçƒ¦ï¼Œè¿™éƒ½æ˜¯æœ¬äººçš„è¡€æ³ªå²å•Šï½ï¼Œæ³¨æ„å®å¡”é¢æ¿å¿…é¡»åœ¨è¿™ä¸ªé˜¶æ®µè£…ï¼Œå¦‚æœåé¢å®‰è£…äº†nginxå•¥çš„å°±ä¸å¯ä»¥è£…å®å¡”é¢æ¿äº†ï¼‰
é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å®‰è£…git+nodeï¼Œlinuxç¯å¢ƒå®‰è£…gitå¾ˆç®€å•ï¼š`yum -y install git`ï¼Œå®‰è£…nodeçš„è¯ï¼Œæœ¬äººç”¨çš„æ˜¯é‡æ–°è®¾ç½®é•œåƒï¼Œä½†æ˜¯å‘ç°nodeç‰ˆæœ¬ä¸æ˜¯æœ€æ–°çš„ï¼Œè¿™é‡Œå»ºè®®å¤§å®¶è·Ÿç€ç½‘ä¸Šæ•™ç¨‹æ¥å§ï¼š<https://www.jianshu.com/p/cb29ceb08a2c>ï¼Œè¿™ä¸¤ä¸ªè£…å¥½åï¼ŒåŸºæœ¬çš„ç¯å¢ƒå°±æ­å»ºå¥½äº†

### åç«¯
å¯¹äºå‰ç«¯éƒ¨ç½²è€Œè¨€ï¼Œåç«¯æœåŠ¡å¾ˆå®¹æ˜“éƒ¨ç½²ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°çš„æ˜¯pm2ä»¥åŠä¸€ä¸ªå®Œæ•´çš„nodeé¡¹ç›®ï¼Œnodeé¡¹ç›®ç›´æ¥ä»gitæ‹‰å–ï¼Œæ‹‰ä¸‹æ¥ä¹‹åæ‰¾åˆ°å¯¹åº”çš„å¯åŠ¨æ–‡ä»¶ï¼Œæ¯”å¦‚ä½ çš„å¯åŠ¨æ–‡ä»¶æ˜¯app.jsï¼Œæ­£å¸¸å¯åŠ¨éœ€è¦è¿è¡Œ`node app.js`ï¼Œç†è®ºä¸Šæ¥è¯´ï¼Œå½“è¿è¡Œäº†è¿™ä¸ªè„šæœ¬åï¼Œå°±å·²ç»å¯ä»¥äº†ï¼Œä½†æ˜¯ä¸ä¹…åä½ ä¼šæƒŠå¥‡çš„å‘ç°ï¼Œ10åˆ†é’Ÿä¸åˆ°ï¼Œè¿™ä¸ªæœåŠ¡è«åå…¶å¦™çš„å…³é—­äº†ï¼æ²¡é”™ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œpm2å°±æ¥äº†ï½
pm2æ˜¯ä¸€ä¸ªnodeè¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥ç®¡ç†ä½ çš„nodeè¿›ç¨‹ï¼Œå¹¶æŸ¥çœ‹nodeè¿›ç¨‹çš„çŠ¶æ€ï¼Œä»¥åŠæ€§èƒ½ç›‘æ§ï¼Œè´Ÿè½½å‡è¡¡ç­‰ã€‚ã€‚ã€‚
pm2å°å†Œå­ï¼š[pm2ç®€æ˜“ä½¿ç”¨æ‰‹å†Œ](https://juejin.im/post/6844903710037016584)
æ¥ä¸‹æ¥ï¼Œè¿è¡Œè¿™æ¡å‘½ä»¤ï¼š`pm2 start ./xxx.js`ï¼Œï¼ˆxxx.jsæ˜¯ä½ çš„nodeå¯åŠ¨æ–‡ä»¶ï¼‰ï¼Œç„¶åä½ å°±å¯ä»¥é€šè¿‡`pm2 list`æ¥æŸ¥çœ‹è¿›ç¨‹å•¦ï½
æœåŠ¡è·‘å¥½ä¹‹åï¼Œæµ‹è¯•æ¥å£æ˜¯å¦å¯ä»¥è®¿é—®ï¼šæœåŠ¡å™¨å…¬ç½‘ip+nodeæœåŠ¡çš„ç«¯å£å·

### å‰ç«¯
è¿™é‡Œä»…è®°å½•æˆ‘è‡ªå·±ä½¿ç”¨çš„æ–¹å¼ï¼šLinux ç³»ç»Ÿé€šè¿‡ FTP ä¸Šä¼ æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨ï¼›å‚è€ƒæ–‡æ¡£ï¼š<https://cloud.tencent.com/document/product/213/42501>
ftpä¸Šä¼ ä¹‹å‰ï¼Œéœ€è¦ç¡®ä¿æœåŠ¡å™¨å·²ç»æ­å»ºå¥½ftpæœåŠ¡<https://cloud.tencent.com/document/product/213/10912>
ç…§ç€ä¸Šé¢çš„æ–‡æ¡£æ’¸å°±å®Œäº‹äº†ï¼Œæ–‡ä»¶ä¸Šä¼ å¥½ä¹‹åï¼Œè®°å½•ä¸‹æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸­çš„ä½ç½®ï¼Œè¿™ä¸ªä¹‹åæœ‰ç”¨ï¼›
æ¥ä¸‹æ¥å°±æ˜¯é…ç½®nginxäº†ï¼Œæˆ‘ä»¬é€šè¿‡å®ƒçš„ä»£ç†åŠŸèƒ½æ¥è®©ç”¨æˆ·å¯ä»¥è®¿é—®æˆ‘ä»¬çš„webï¼›
linuxä¸‹å®‰è£…nginx: <https://www.cnblogs.com/xxoome/p/5866475.html>
nginxå®‰è£…å¥½åï¼Œä¿®æ”¹å®ƒçš„é…ç½®æ–‡ä»¶ï¼šnginx.confï¼Œä¸‹é¢æ˜¯æˆ‘è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼š
*è¿™å°æœåŠ¡å™¨æˆ‘éƒ¨ç½²äº†å››ä¸ªé¡¹ç›®ï¼Œ8081ï¼Œ8082ï¼Œ8083ï¼Œå’Œ80é»˜è®¤ç«¯å£*
``` nginx.conf
# For more information on configuration, see:
#   * Official English Documentation: http://nginx.org/en/docs/
#   * Official Russian Documentation: http://nginx.org/ru/docs/

# user nginx;
  user root;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;

# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.
# include /usr/share/nginx/modules/*.conf;

events {
    worker_connections 1024;
}

http {
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;

    # Load modular configuration files from the /etc/nginx/conf.d directory.
    # See http://nginx.org/en/docs/ngx_core_module.html#include
    # for more information.
    include /etc/nginx/conf.d/*.conf;
    server {
        listen 8081;
        server_name localhost1;
        root /etc/nginx/wycloud;
        charset 'utf-8';

        location / {
        root /etc/nginx/wycloud;
        index index.html;
        try_files $uri $uri/ /index.html;
}
location ~.*\.(gif|jpg|jpeg|png|bmp|swf|eot|css|svg|ttf|woff|woff2|properties|json)?$ {
 access_log off;
            root /etc/nginx/wycloud;
            expires 30d;
            break;
        }
}
    server {
        listen       8082;
       #listen       [::]:80 default_server;
        server_name  localhost2;
        root         /etc/nginx/html;
        charset 'utf-8';
        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        location / {
root /etc/nginx/html;
index index.html;
try_files $uri $uri/ /index.html;
        }
 location ~.*\.(gif|jpg|jpeg|png|bmp|swf|eot|svg|ttf|woff|woff2|properties|json)?$ {
 access_log off;
            root /etc/nginx/html;
            expires 30d;
            break;
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }
server {
    listen 80;
    listen [::]:80;
    root /usr/share/nginx/blog;
    server_name lidongss;
    location / {
            # First attempt to serve request as file, then
            # as directory, then fall back to displaying a 404.
            try_files $uri $uri/ =404;
    }
   location /navigator/ {
        return 302 http://175.24.123.231:8083/;
        }
}
server {
        listen 8083;
        server_name webstack;
        charset 'utf-8';

        location / {
        root /etc/nginx/webstack;
        index index.html;
        try_files $uri $uri/ /index.html;
}
}


# Settings for a TLS enabled server.
#
#    server {
#        listen       443 ssl http2 default_server;
#        listen       [::]:443 ssl http2 default_server;
#        server_name  _;
#        root         /usr/share/nginx/html;
#
#        ssl_certificate "/etc/pki/nginx/server.crt";
#        ssl_certificate_key "/etc/pki/nginx/private/server.key";
#        ssl_session_cache shared:SSL:1m;
#        ssl_session_timeout  10m;
#        ssl_ciphers HIGH:!aNULL:!MD5;
#        ssl_prefer_server_ciphers on;
#
#        # Load configuration files for the default server block.
#        include /etc/nginx/default.d/*.conf;
#
#        location / {
#        }
#
#        error_page 404 /404.html;
#            location = /40x.html {
#        }
#
#        error_page 500 502 503 504 /50x.html;
#            location = /50x.html {
#        }
#    }

}

```
nginxçš„ç›¸å…³çŸ¥è¯†è¿˜æ˜¯è¦ç¨å¾®å­¦ä¹ ä¸€ä¸‹çš„ï¼Œå¯¹äºæˆ‘ä»¬å‰ç«¯éƒ¨ç½²é¡¹ç›®æ¥è¯´ï¼Œå­¦ä¼šåŸºæœ¬çš„ä»£ç†æ–¹æ³•å°±å¯ä»¥äº†

ä¹‹åæ¯æ¬¡è¦æ›´æ–°å‰ç«¯é¡¹ç›®çš„è¯ï¼Œ`cd /xxx`è¿›å…¥å¯¹åº”çš„èµ„æºæ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ`mdelete *`ï¼Œåˆ é™¤åŸæ¥æ‰€æœ‰çš„åŒ…ï¼Œç„¶åå†æ‰§è¡Œ`lcd /xx`è¿›å…¥ä½ æœ¬åœ°çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ`mput *`æ‰¹é‡ä¸Šä¼ æ–‡ä»¶

*tip: nginxçš„å‘å¾ˆå¤šï¼Œé›¶åŸºç¡€æè¿™ä¸œè¥¿å°±å’Œç›²äººæ‘¸è±¡ä¸€æ ·ï¼Œå·®ç‚¹æ²¡æŠŠæˆ‘ææ­»ã€‚ã€‚*
ä¸‹é¢åˆ—ä¸¾ä¸€äº›æˆ‘ä¸ªäººå¸¸ç”¨çš„å‘½ä»¤ï¼š
+ nginxé‡å¯ï¼š`nginx -s reload`
+ åˆ—ä¸¾å½“å‰å¼€æ”¾çš„æœåŠ¡ï¼š`netstat -ntlp`
+ å¯åŠ¨nginxï¼š`nginx -c /etc/nginx/nginx.conf`
ä¸Šä¼ èµ„æºçš„æ—¶å€™ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œä¼šæç¤ºæƒé™ä¸å¤Ÿï¼š
+ å¼€æƒé™ï¼š`chown -R ftpuser:ftpuser /var/ftp/test`(åé¢çš„è·¯å¾„æ¢ä¸ºæ–‡ä»¶å¤¹çš„åœ°å€)